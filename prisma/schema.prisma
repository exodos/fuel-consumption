generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["views"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Consumption {
  id                  Int               @default(autoincrement())
  transactionNumber   String            @map("transaction_number")
  amount              Float
  fuelInLiters        Float             @map("fuel_in_liters")
  fuelType            fuel_type_enum    @map("fuel_type")
  plateCode           Int               @map("plate_code")
  plateRegion         plate_region_enum @map("plate_region")
  plateNumber         String            @map("plate_number")
  paidAt              DateTime          @map("paid_at")
  debitAccountNumber  String            @map("debit_account_number")
  creditAccountNumber String            @map("credit_account_number")
  fuelStationId       String            @map("fuel_station_id")
  fuelStationRegion   String            @map("fuel_station_region")
  fuelStationName     String            @map("fuel_station_name")
  fuelStationZone     String            @map("fuel_station_zone")
  fuelStationWoreda   String            @map("fuel_station_woreda")
  firstName           String            @map("first_name")
  middleName          String            @map("middle_name")
  lastName            String            @map("last_name")
  mobileNumber        String            @map("mobile_number")
  sourceId            Int               @map("source_id")
  companyId           String            @map("company_id")
  createdAt           DateTime          @default(now()) @map("created_at")
  updatedAt           DateTime          @updatedAt @map("updated_at")

  @@id([transactionNumber, plateCode, plateRegion, plateNumber])
  @@map("consumption")
}

model DailyConsumption {
  amount        Float
  day           DateTime
  fuelInLiters  Float          @map("fuel_in_liters")
  fuelStationId String         @map("fuel_station_id")
  fuelType      fuel_type_enum @map("fuel_type")
  sourceId      Int            @map("source_id")

  @@id([day, fuelStationId])
  @@map("daily_consumption")
}

model WeeklyConsumption {
  amount        Float
  week          DateTime
  fuelInLiters  Float          @map("fuel_in_liters")
  fuelStationId String         @map("fuel_station_id")
  fuelType      fuel_type_enum @map("fuel_type")
  sourceId      Int            @map("source_id")

  @@id([week, fuelStationId])
  @@map("weekly_consumption")
}

model MonthlyConsumption {
  amount        Float
  month         DateTime
  fuelInLiters  Float          @map("fuel_in_liters")
  fuelStationId String         @map("fuel_station_id")
  fuelType      fuel_type_enum @map("fuel_type")
  sourceId      Int            @map("source_id")

  @@id([month, fuelStationId])
  @@map("monthly_consumption")
}

enum fuel_type_enum {
  Diesel
  Benzene
}

enum plate_region_enum {
  AA
  AM
  OR
  TG
  HR
}
